---
{"dg-publish":true,"permalink":"/9.일지/2025/2025-08-11/","dgPassFrontmatter":true,"noteIcon":""}
---


## ✅ To-Do List
- [ ] COW, Proxmox 포맷 비교, qcow2 내부 동작, 더미 파일 생성/분석 등 핵심 기술 주제 문서화
- [ ] 누락 방지 프로세스 점검 및 키워드 감지 범위 확장

---

## 🛠 기술 파트

### 1. COW(Copy-On-Write) 개념과 장단점
- **개념**: 데이터 복사는 실제 쓰기 작업이 발생할 때까지 지연시키는 최적화
- **활용**: OS 프로세스 `fork()` 메모리, Btrfs·ZFS 파일시스템, qcow2 VM 디스크 스냅샷
- **장점**: 메모리/스토리지 절약, 중복 데이터 최소화, 빠른 복제
- **단점**: 최초 쓰기 시 오버헤드, 메타데이터 관리 부담

### 2. Proxmox 스토리지 포맷 비교 (`raw` vs `qcow2`)
- raw: 단순 구조, 빠른 IO, 스냅샷 불가
- qcow2: 스냅샷·압축·암호화 지원, 기능 많음
- HDD 환경에서 qcow2 오버헤드 큼, NVMe/SSD에서는 감소
- 스냅샷·백업 빈번 → qcow2, 최고 성능 필요 → raw

### 3. qcow2 내부 동작
- 블록 매핑 테이블 기반 논리→물리 블록 관리
- 스냅샷 시 기존 블록 유지, 변경 시 새 블록(COW)
- 압축·암호화 지원
- 메타데이터 관리로 인한 CPU 부하 가능

### 4. 더미 파일 생성/분석
- **목적**: 스토리지 성능 측정, 압축 효율 비교, COW 검증
- **명령 예시**:
  ```bash
  dd if=/dev/zero of=testfile bs=1G count=10       # 0 채움, 압축률 높음
  dd if=/dev/urandom of=testfile bs=1G count=10    # 무작위 데이터, 압축률 낮음
  fallocate -l 10G testfile                        # 공간만 할당, 매우 빠름
```

---
## 🔖 Hashtags

#COW #Proxmox #qcow2 #더미파일 #KST기준