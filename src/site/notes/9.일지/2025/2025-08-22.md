---
{"dg-publish":true,"permalink":"/9.일지/2025/2025-08-22/","dgPassFrontmatter":true,"noteIcon":""}
---

## To-Do List
- [ ] Oracle `STARTUP` 동작 정리: `STARTUP`와 `STARTUP OPEN` 동등성 문서화, `MOUNT/NOMOUNT/RESTRICT/FORCE` 차이 표 작성
- [ ] 운영 서버에서 `systemd-analyze security` 전 서비스 일괄 점검 실행 및 결과 저장
- [ ] 노출 점수 상위(위험) 유닛 하드닝 계획 수립: 보호·격리 옵션 우선 적용 후보 선정
- [ ] 하드닝 베이스라인 템플릿 초안 작성: 공통 `*.service.d/override.conf` 스니펫

## 기술 파트
- Oracle: `STARTUP` vs `STARTUP OPEN`
  - 요약: `STARTUP`는 기본적으로 데이터베이스를 **OPEN** 상태까지 올리므로 `STARTUP OPEN`과 **동일** 동작. 단계 선택은 `STARTUP NOMOUNT/MOUNT/RESTRICT/FORCE` 등으로 구분.
  - 단계 개념: NOMOUNT(인스턴스만), MOUNT(컨트롤파일 마운트), OPEN(데이터파일 오픈), RESTRICT(제한 모드), FORCE(비정상 종료 시 재시작 포함).
- systemd-analyze security
  - 목적: 각 유닛의 격리·권한·공격면 옵션을 분석해 0.0(최상)~10.0(최악) 노출 점수로 평가.
  - 전 서비스 점검 예시
    - 모든 서비스 점검: `systemd-analyze security --no-pager` 또는 `systemctl list-units --type=service --all --no-legend | awk '{print $1}' | xargs -r systemd-analyze security --no-pager`(환경에 따라 둘 중 선택, 일부는 **확실하지 않음**)
    - 특정 서비스: `systemd-analyze security ssh.service --no-pager`
  - 하드닝 핵심 옵션(대표)
    - `NoNewPrivileges=yes`, `PrivateTmp=yes`, `ProtectSystem=strict`, `ProtectHome=read-only`
    - `CapabilityBoundingSet=`, `AmbientCapabilities=`, `RestrictSUIDSGID=yes`
    - `RestrictAddressFamilies=`, `SystemCallFilter=`, `LockPersonality=yes`
    - `ProtectKernelLogs=yes`, `ProtectKernelModules=yes`, `ProtectControlGroups=yes`, `ProtectClock=yes`, `ProtectHostname=yes`
  - 적용 방법 예시(오버라이드)
    - `systemctl edit <unit>.service` 후
      ```
      [Service]
      NoNewPrivileges=yes
      PrivateTmp=yes
      ProtectSystem=strict
      ProtectHome=read-only
      ```
    - 적용/검증: `systemctl daemon-reload && systemctl restart <unit>; systemd-analyze security <unit>`
- 점검 시 유의
  - 일부 옵션은 기능에 영향 가능(예: 파일 쓰기 필요 서비스에서 `ProtectSystem=strict`는 과도할 수 있음) → 단계적 적용 권장.
  - 커널/배포판 버전에 따라 옵션 지원 범위 상이 가능(**확실하지 않음**).

## 비기술 파트
- 요청 주제: Oracle 기동 단계 차이 명확화, systemd 전수 보안 점검 방법 안내.
- 산출물 포맷 합의 준수: 코드 블록 전체 출력, 체크박스 강제, 섹션 순서 고정.

## PA
- upgrade 관련 내부 세미나 진행

## 감정 상태
- 정확성·재현 가능 절차 중시. 실무 적용 지향 태도 유지.

## 해시태그
#Oracle #STARTUP #systemd #Security #Linux